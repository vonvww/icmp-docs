location ^~ /ihos/ {

        #limit_req zone=allips2 burst=10 nodelay;

        #proxy_set_header Host $host;
        proxy_set_header   Host sjh.sj-hospital.org;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        proxy_next_upstream http_502 http_503 http_504 error timeout invalid_header;

        if ($request_method ~* "OPTIONS") {
                add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With, X-PEP-TOKEN' always;
                add_header 'Access-Control-Allow-Methods' 'GET, PUT, POST, DELETE, OPTIONS' always;
                add_header 'Access-Control-Allow-Origin' '*' always;
                add_header 'Access-Control-Max-Age' '1000' always;
                return 200;
        }

        proxy_pass http://service_ihos/ihos/;


        #将指定用户导向指定服务器
        set $a 0;

        #wangwei
        #if ($http_x_pep_token ~* "eyJpZCI6IjgxMjA3MzkwLWJhMzAtNDdkZS1hZGZjLWU0ZjYxYjAxNzNlYSIsIm5hbWUiOiIxMzUyMTk3NzEwMyJ9") {
        #    set $a 1;
        #}

        #wanghe
        #if ($http_x_pep_token ~* "eyJpZCI6IjlmNTViZGU0LTQ2YmEtNDk1ZC04ZTYwLTI0MGE0YmJiYjU4YiIsIm5hbWUiOiIxMzk0MDQzNjk1OCJ9") {
        #    set $a 1;
        #}
        #shanzheping
        #if ($http_x_pep_token ~* "eyJpZCI6IjQ2MjAyYzllLTcxMjMtNGJmZi1hMTA1LTVkZjI1MjA0ZGQxMyIsIm5hbWUiOiIxMzgwNDIxMjA1OSJ9") {
        #    set $a 1;
        #}
        #hexin
        #if ($http_x_pep_token ~* "eyJpZCI6Ijc3YmMzMDJlLWQzNzAtNDk0NS05ZDkxLTc5ZjIxYzE3Yzg2ZSIsIm5hbWUiOiIxNTY0MDU2Nzc4MCJ9") {
        #    set $a 1;
        #}
        #lichenxi
        #if ($http_x_pep_token ~* "eyJpZCI6IjZlZGE1YWZkLTZjNWYtNDJjMC05MWRlLTY1M2ZiMDRmOTkwYiIsIm5hbWUiOiIxMzYwNDAyOTAxMSJ9") {
        #    set $a 1;
        #}
        #wangdongshi
        #if ($http_x_pep_token ~* "eyJpZCI6ImNmOTZjYzA0LWVmNjEtNDk2YS05YjI2LWExZjAyZGFjNDRlMiIsIm5hbWUiOiIxODYwNDAzOTU5MyJ9") {
        #    set $a 1;
        #}
        #chenbingjie
        #if ($http_x_pep_token ~* "eyJpZCI6IjgwNGIyODhhLTIwNDctNDMyZS1hYWFiLTI3MTI1MDE4ZTc1YyIsIm5hbWUiOiIxNTY0MDE0NDcwMiJ9") {
        #    set $a 1;
        #}
        # hawks
        #if ($http_x_pep_token ~* "eyJpZCI6Ijk0YzcwYzdhLWY2NTgtNGI5Ni1hNzc5LWFlZjQyNTdlZWVmMyIsIm5hbWUiOiIxMzcwMDAyMTk3MyJ9") {
        #    set $a 1;
        #}

        #wanghaopeng
        #if ($http_x_pep_token ~* "eyJpZCI6IjI4MWVlZmQ3LTdkM2YtNDFmZS1iYzczLWZjMTgyNmRhODBkOCIsIm5hbWUiOiIxODYxMDI5NDQ4NyJ9") {
        #    set $a 1;
        #}

        #xuhongyu
        #if ($http_x_pep_token ~* "eyJpZCI6Ijc5YWJkMzNkLWFhZGMtNDYyZC1iNjYzLTg2NDBmODQ2NDJiNyIsIm5hbWUiOiIxODMwNDA3Nzc5OCJ9") {
        #    set $a 1;
        #}

        #eyJpZCI6Ijc.*$
        #if ($http_x_pep_token ~* "eyJpZCI6Ijc.*$") {
        #    set $a 1;
        #}

        #id 1、3、5、7开头
        #if ($http_x_pep_token ~* "(eyJpZCI6IjE.*$|eyJpZCI6IjM.*$|eyJpZCI6IjU.*$|eyJpZCI6Ijc.*$)") {
        #    set $a 1;
        #}

        #id 14m~@~A34m~@~A54m~@~A734m~@头
        #if ($http_x_pep_token ~* "(eyJpZCI6IjE.*$|eyJpZCI6IjM.*$)") {
        #    set $a 1;
        #}

        if ($a = 1){
                proxy_pass http://service_grey$request_uri;
        }
}

